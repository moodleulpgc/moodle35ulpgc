define(["qtype_stack/jsxgraphcore-lazy"],function(a){return{find_input_id:function(a,b){for(var c=document.getElementById(a);(c=c.parentElement)&&(!c.classList.contains("formulation")||!c.parentElement.classList.contains("content")););return c=c.querySelector('input[id$="_'+b+'"]'),c.addEventListener("change",function(a){M.core_formchangechecker.set_form_changed()}),c.id},bind_point:function(b,c){var d=document.getElementById(b);if(d.value&&""!=d.value){var e=JSON.parse(d.value);try{c.setPosition(a.COORDS_BY_USER,e)}catch(f){}c.board.update(),c.update()}var g=c.X(),h=c.Y();c.board.on("update",function(){if(g!=c.X()||h!=c.Y()){var a=JSON.stringify([c.X(),c.Y()]);if(g=!1,h=!1,d.value!=a){d.value=a;var b=new Event("change");d.dispatchEvent(b)}}});var i=JSON.stringify([c.X(),c.Y()]);d.addEventListener("input",function(b){if(d.value!=i){try{var e=JSON.parse(d.value);"number"==typeof e[0]&&"number"==typeof e[1]&&(c.setPosition(a.COORDS_BY_USER,e),c.board.update(),c.update())}catch(f){}i=d.value}}),d.addEventListener("change",function(b){if(d.value!=i){try{var e=JSON.parse(d.value);"number"==typeof e[0]&&"number"==typeof e[1]&&(c.setPosition(a.COORDS_BY_USER,e),c.board.update(),c.update())}catch(f){}i=d.value}})},bind_slider:function(a,b){var c=document.getElementById(a);if(c.value&&""!=c.value){try{b.setValue(JSON.parse(c.value))}catch(d){}b.board.update(),b.update()}var e=b.Value();b.board.on("update",function(){if(e!=b.Value()){var a=JSON.stringify(b.Value());if(e=!1,c.value!=a){c.value=a;var d=new Event("change");c.dispatchEvent(d)}}});var f=JSON.stringify(b.Value());c.addEventListener("input",function(a){if(c.value!=f){try{var d=JSON.parse(c.value);"number"==typeof d&&(b.setValue(d),b.board.update(),b.update())}catch(e){}f=c.value}}),c.addEventListener("change",function(a){if(c.value!=f){try{var d=JSON.parse(c.value);"number"==typeof d&&(b.setValue(d),b.board.update(),b.update())}catch(e){}f=c.value}})}}});