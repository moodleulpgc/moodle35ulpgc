/**
 * Implementaton of the quizaccess_activatedelayedattempt timer JScript.
 * Based on quizaccess_activateattempt https://github.com/IITBombayWeb/moodle-quizaccess_activatedelayedattempt/tree/v1.0.3
 *
 * @package   quizaccess_activatedelayedattempt
 * @author    Juan Pablo de Castro
 * @copyright 2020 University of Valladolid, Spain
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery"],(function(t){var e,i;return{get_string:function(t,i,n=null){return e[t]},set_strings:function(t){e=t},init:function(e=".continuebutton",n,a,d,p,s,o){if(t(".quizattempt #activatedelayedattemptnotification").length>0)return!1;this.set_strings(o),i=(new Date).getTime()+s,t("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:"accessrule/activatedelayedattempt/flipdown/flipdown.css"}),jQuery.getScript("accessrule/activatedelayedattempt/flipdown/flipdown.js",this.startCounter.bind(this));var r=t("<center>"+o.quizwillstartinabout+'<div id="flipdown" class="flipdown"></div><p>'+o.pleasewait+"</p></center>"),l=t("<form/>",{method:"post",action:n}).append(t("<input>",{type:"hidden",name:"cmid",value:a}),t("<input>",{type:"hidden",name:"sesskey",value:d}),t("<p>",{id:"activatedelayedtimer"}),t("<input>",{type:"submit",class:"btn btn-secondary",id:"startAttemptButton",disabled:!0,value:p})),c=t('<div id="activatedelayedattemptnotification"/>').append(r);t(e).html(c).append(l,t("</br>")),t("#startAttemptButton").prop("disabled",!0)},startCounter:function(){new FlipDown(i/1e3,{theme:"dark",headings:["","","",""]}).start().ifEnded(this.activateAttempt),t("#flipdown").width(32*t("#flipdown").find(".rotor").length)},activateAttempt:function(){var e=(new Date).getTime();i-e<0?(t("#flipdown").hide(),t("#activatedelayedattemptnotification").hide(),t("#startAttemptButton").show().prop("disabled",!1)):setTimeout(this.activateAttempt,1e3)}}}));